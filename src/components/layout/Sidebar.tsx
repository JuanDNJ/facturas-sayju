import { NavLink, useLocation } from 'react-router-dom'
import { useEffect, useRef } from 'react'

// Prefetch simple de módulos de página al hacer hover para acelerar navegación
function prefetchPage(
  key: 'dashboard' | 'clients' | 'invoices' | 'stamps' | 'settings' | 'suggestions'
) {
  switch (key) {
    case 'dashboard':
      import('../../pages/Dashboard')
      break
    case 'clients':
      import('../../pages/Clients')
      break
    case 'invoices':
      import('../../pages/Invoices')
      break
    case 'stamps':
      import('../../pages/Stamps')
      break
    case 'settings':
      import('../../pages/Settings')
      break
    case 'suggestions':
      import('../../pages/Suggestions')
      break
  }
}

const linkBase =
  'flex items-center gap-2 rounded px-3 py-2 text-sm font-medium hover:bg-[var(--menu-hover)] transition-colors'

type SidebarProps = {
  open: boolean
  onClose: () => void
  collapsed?: boolean
  isModal?: boolean
}

export default function Sidebar({
  open,
  onClose,
  collapsed = false,
  isModal = true,
}: SidebarProps) {
  const firstLinkRef = useRef<HTMLAnchorElement | null>(null)
  const location = useLocation()

  // Focus inicial y cierre con Escape cuando es modal
  useEffect(() => {
    if (isModal && open) {
      firstLinkRef.current?.focus()
      const onKey = (e: KeyboardEvent) => {
        if (e.key === 'Escape') onClose()
      }
      window.addEventListener('keydown', onKey)
      return () => window.removeEventListener('keydown', onKey)
    }
  }, [isModal, open, onClose])

  // Cerrar al cambiar de ruta (por ejemplo, al navegar con cualquier NavLink)
  useEffect(() => {
    if (isModal && open) onClose()
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, [location.pathname])

  return (
    <>
      {/* Overlay para móvil */}
      <div
        className={`fixed inset-0 z-30 bg-black/75 transition-opacity md:hidden ${
          open ? 'opacity-100' : 'pointer-events-none opacity-0'
        } no-print`}
        onClick={onClose}
        aria-hidden
      />
      <aside
        className={`sidebar-solid fixed z-40 h-full w-full md:sticky md:top-0 md:h-screen ${
          collapsed ? 'md:w-16' : 'md:w-64'
        } w-64 shrink-0 transition-transform md:transition-[width] ${
          open ? 'translate-x-0' : '-translate-x-full md:translate-x-0'
        } no-print`}
        {...(isModal && {
          'aria-modal': 'true',
          role: 'dialog',
        })}
      >
        <div className="flex items-center justify-between p-4 text-lg font-semibold">
          <span className={collapsed ? 'md:hidden' : undefined}>
            <NavLink to="/">Facturas Sayju</NavLink>
          </span>
          <NavLink to="/">
            <img src="logo.png" width={32} alt="Logo de empresa" />
          </NavLink>
          <button
            type="button"
            className="rounded p-2 hover:bg-[var(--menu-hover)] md:hidden"
            onClick={onClose}
            aria-label="Cerrar menú"
          >
            ✕
          </button>
        </div>
        <nav className="flex flex-col gap-1 p-2">
          <NavLink
            to="/"
            end
            className={({ isActive }) =>
              (isActive ? `${linkBase} bg-[var(--menu-hover)]` : linkBase) +
              (collapsed ? ' justify-center' : '')
            }
            ref={firstLinkRef}
            onMouseEnter={() => prefetchPage('dashboard')}
            onClick={() => {
              if (isModal) onClose()
            }}
          >
            <span className="w-10">
              <svg
                fill="#000000"
                width="100%"
                height="100%"
                viewBox="0 0 24 24"
                id="dashboard"
                data-name="Flat Line"
                xmlns="http://www.w3.org/2000/svg"
                className="icon flat-line"
              >
                <path
                  id="secondary"
                  d="M9,12H4a1,1,0,0,1-1-1V4A1,1,0,0,1,4,3H9a1,1,0,0,1,1,1v7A1,1,0,0,1,9,12Zm12,8V13a1,1,0,0,0-1-1H15a1,1,0,0,0-1,1v7a1,1,0,0,0,1,1h5A1,1,0,0,0,21,20Z"
                  style={{
                    fill: 'rgb(44, 169, 188)',
                    strokeWidth: 2,
                  }}
                ></path>
                <path
                  id="primary"
                  d="M21,7V4a1,1,0,0,0-1-1H15a1,1,0,0,0-1,1V7a1,1,0,0,0,1,1h5A1,1,0,0,0,21,7ZM10,20V17a1,1,0,0,0-1-1H4a1,1,0,0,0-1,1v3a1,1,0,0,0,1,1H9A1,1,0,0,0,10,20ZM9,12H4a1,1,0,0,1-1-1V4A1,1,0,0,1,4,3H9a1,1,0,0,1,1,1v7A1,1,0,0,1,9,12Zm12,8V13a1,1,0,0,0-1-1H15a1,1,0,0,0-1,1v7a1,1,0,0,0,1,1h5A1,1,0,0,0,21,20Z"
                  style={{
                    fill: 'none',
                    stroke: 'rgb(0, 0, 0)',
                    strokeLinecap: 'round',
                    strokeLinejoin: 'round',
                    strokeWidth: 2,
                  }}
                ></path>
              </svg>
            </span>
            {!collapsed && <span className="text-lg">Dashboard</span>}
          </NavLink>
          <NavLink
            to="/clientes"
            className={({ isActive }) =>
              (isActive ? `${linkBase} bg-[var(--menu-hover)]` : linkBase) +
              (collapsed ? ' justify-center' : '')
            }
            onMouseEnter={() => prefetchPage('clients')}
            onClick={() => {
              if (isModal) onClose()
            }}
          >
            <span className="w-10">
              <svg
                fill="#2CA9BC"
                width="100%"
                height="100%"
                viewBox="0 0 36 36"
                version="1.1"
                preserveAspectRatio="xMidYMid meet"
                xmlns="http://www.w3.org/2000/svg"
              >
                <g id="SVGRepo_bgCarrier" strokeWidth="0" />

                <g
                  id="SVGRepo_tracerCarrier"
                  strokeLinecap="round"
                  strokeLinejoin="round"
                  stroke="#CCCCCC"
                  strokeWidth="0.072"
                />

                <g id="SVGRepo_iconCarrier">
                  {' '}
                  <title>users-solid</title>{' '}
                  <path
                    className="clr-i-solid clr-i-solid-path-1"
                    d="M12,16.14q-.43,0-.87,0a8.67,8.67,0,0,0-6.43,2.52l-.24.28v8.28H8.54v-4.7l.55-.62.25-.29a11,11,0,0,1,4.71-2.86A6.59,6.59,0,0,1,12,16.14Z"
                  />
                  <path
                    className="clr-i-solid clr-i-solid-path-2"
                    d="M31.34,18.63a8.67,8.67,0,0,0-6.43-2.52,10.47,10.47,0,0,0-1.09.06,6.59,6.59,0,0,1-2,2.45,10.91,10.91,0,0,1,5,3l.25.28.54.62v4.71h3.94V18.91Z"
                  />
                  <path
                    className="clr-i-solid clr-i-solid-path-3"
                    d="M11.1,14.19c.11,0,.2,0,.31,0a6.45,6.45,0,0,1,3.11-6.29,4.09,4.09,0,1,0-3.42,6.33Z"
                  />
                  <path
                    className="clr-i-solid clr-i-solid-path-4"
                    d="M24.43,13.44a6.54,6.54,0,0,1,0,.69,4.09,4.09,0,0,0,.58.05h.19A4.09,4.09,0,1,0,21.47,8,6.53,6.53,0,0,1,24.43,13.44Z"
                  />
                  <circle
                    className="clr-i-solid clr-i-solid-path-5"
                    cx="17.87"
                    cy="13.45"
                    r="4.47"
                  />
                  <path
                    className="clr-i-solid clr-i-solid-path-6"
                    d="M18.11,20.3A9.69,9.69,0,0,0,11,23l-.25.28v6.33a1.57,1.57,0,0,0,1.6,1.54H23.84a1.57,1.57,0,0,0,1.6-1.54V23.3L25.2,23A9.58,9.58,0,0,0,18.11,20.3Z"
                  />{' '}
                  <rect x="0" y="0" width="36" height="36" fillOpacity="0" />{' '}
                </g>
              </svg>
            </span>
            {!collapsed && <span className="text-lg">Clientes</span>}
          </NavLink>
          <NavLink
            to="/invoices"
            className={({ isActive }) =>
              (isActive ? `${linkBase} bg-[var(--menu-hover)]` : linkBase) +
              (collapsed ? ' justify-center' : '')
            }
            onMouseEnter={() => prefetchPage('invoices')}
            onClick={() => {
              if (isModal) onClose()
            }}
          >
            <span className="w-10">
              <svg
                height="100%"
                width="100%"
                version="1.1"
                id="Layer_1"
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 508 508"
                fill="#000000"
              >
                <g id="SVGRepo_bgCarrier" strokeWidth="0" />

                <g id="SVGRepo_tracerCarrier" strokeLinecap="round" strokeLinejoin="round" />

                <g id="SVGRepo_iconCarrier">
                  {' '}
                  <path
                    style={{
                      fill: '#2CA9BC',
                    }}
                    d="M465.5,320.1h-423c-7.8,0-14.1,6.3-14.1,14.1v131.5c0,7.8,6.3,14.1,14.1,14.1h423 c7.8,0,14.1-6.3,14.1-14.1V334.2C479.6,326.4,473.3,320.1,465.5,320.1z"
                  />{' '}
                  <path
                    style={{
                      fill: '#2CA9BC',
                    }}
                    d="M433.6,42.3c0-7.8-6.3-14.1-14.1-14.1h-329c-7.8,0-14.1,6.3-14.1,14.1v249.6h357.2V42.3z"
                  />{' '}
                  <path
                    style={{
                      fill: '#2CA9BC',
                    }}
                    d="M465.5,320.1h-423c-7.8,0-14.1,6.3-14.1,14.1V365h47.1c7.8,0,14.1,6.3,14.1,14.1 c0,7.8-6.3,14.1-14.1,14.1H28.4V416h22.9c7.8,0,14.1,6.3,14.1,14.1s-6.3,14.1-14.1,14.1H28.4v21.6c0,7.8,6.3,14.1,14.1,14.1h423 c7.8,0,14.1-6.3,14.1-14.1V334.2C479.6,326.4,473.3,320.1,465.5,320.1z"
                  />{' '}
                  <g>
                    {' '}
                    <path
                      style={{
                        fill: '#100%',
                      }}
                      d="M166.8,98.9c13,0,23.6,10.6,23.6,23.6c0,7.8,6.3,14.1,14.1,14.1s14.1-6.3,14.1-14.1 c0-23.7-16-43.6-37.7-49.8V61.9c0-7.8-6.3-14.1-14.1-14.1s-14.1,6.3-14.1,14.1v10.8C131,78.9,115,98.8,115,122.5 c0,28.6,23.2,51.8,51.8,51.8c-0.4,0.1,0,0,0.1,0c12.1,1.1,23.5,11,23.5,23.4c0,13-10.6,23.6-23.6,23.6s-23.6-10.6-23.6-23.6 c0-7.8-6.3-14.1-14.1-14.1s-14.1,6.3-14.1,14.1c0,23.7,16,43.6,37.7,49.8v10.7c0,7.8,6.3,14.1,14.1,14.1s14.1-6.3,14.1-14.1v-10.7 c21.7-6.2,37.7-26.1,37.7-49.8c0-28.6-25.2-51.7-53.8-51.7c0.4-0.1,0,0-0.1,0c-12-1.1-21.5-11.2-21.5-23.5 C143.2,109.5,153.8,98.9,166.8,98.9z"
                    />{' '}
                    <path
                      style={{
                        fill: '#100%',
                      }}
                      d="M400.8,60.2h-142c-7.8,0-14.1,6.3-14.1,14.1s6.3,14.1,14.1,14.1h142c7.8,0,14.1-6.3,14.1-14.1 S408.6,60.2,400.8,60.2z"
                    />{' '}
                    <path
                      style={{
                        fill: '#100%',
                      }}
                      d="M400.8,117.4h-142c-7.8,0-14.1,6.3-14.1,14.1s6.3,14.1,14.1,14.1h142c7.8,0,14.1-6.3,14.1-14.1 S408.6,117.4,400.8,117.4z"
                    />{' '}
                    <path
                      style={{
                        fill: '#100%',
                      }}
                      d="M400.8,174.5h-142c-7.8,0-14.1,6.3-14.1,14.1s6.3,14.1,14.1,14.1h142c7.8,0,14.1-6.3,14.1-14.1 S408.6,174.5,400.8,174.5z"
                    />{' '}
                    <path
                      style={{
                        fill: '#100%',
                      }}
                      d="M400.8,231.7h-142c-7.8,0-14.1,6.3-14.1,14.1s6.3,14.1,14.1,14.1h142c7.8,0,14.1-6.3,14.1-14.1 C414.9,238,408.6,231.7,400.8,231.7z"
                    />{' '}
                    <path
                      style={{
                        fill: '#100%',
                      }}
                      d="M344.7,368.3c-7.8,0-14.1,6.3-14.1,14.1v20.9H177.4v-20.9c0-7.8-6.3-14.1-14.1-14.1 s-14.1,6.3-14.1,14.1v35c0,7.8,6.3,14.1,14.1,14.1h181.4c7.8,0,14.1-6.3,14.1-14.1v-35C358.8,374.7,352.5,368.3,344.7,368.3z"
                    />{' '}
                    <path
                      style={{
                        fill: '#100%',
                      }}
                      d="M465.5,291.9h-3.7V42.3c0-23.3-19-42.3-42.3-42.3h-329C67.2,0,48.2,19,48.2,42.3v249.6h-5.7 c-23.3,0-42.3,19-42.3,42.3v131.5c0,23.3,19,42.3,42.3,42.3h423c23.3,0,42.3-19,42.3-42.3V334.2 C507.8,310.9,488.8,291.9,465.5,291.9z M76.4,42.3c0-7.8,6.3-14.1,14.1-14.1h329c7.8,0,14.1,6.3,14.1,14.1v249.6H76.4V42.3z M479.6,465.7c0,7.8-6.3,14.1-14.1,14.1h-423c-7.8,0-14.1-6.3-14.1-14.1V334.2c0-7.8,6.3-14.1,14.1-14.1h423 c7.8,0,14.1,6.3,14.1,14.1V465.7z"
                    />{' '}
                  </g>{' '}
                </g>
              </svg>
            </span>
            {!collapsed && <span className="text-lg">Facturas</span>}
          </NavLink>
          <NavLink
            to="/sellos"
            className={({ isActive }) =>
              (isActive ? `${linkBase} bg-[var(--menu-hover)]` : linkBase) +
              (collapsed ? ' justify-center' : '')
            }
            onMouseEnter={() => prefetchPage('stamps')}
            onClick={() => {
              if (isModal) onClose()
            }}
          >
            <span className="w-10">
              <svg
                width="100%"
                height="100%"
                viewBox="0 0 1024.00 1024.00"
                fill="#2CA9BC"
                className="icon"
                version="1.1"
                xmlns="http://www.w3.org/2000/svg"
                stroke="#2CA9BC"
                strokeWidth="15.36"
              >
                <g id="SVGRepo_bgCarrier" strokeWidth="0"></g>
                <g
                  id="SVGRepo_tracerCarrier"
                  strokeLinecap="round"
                  strokeLinejoin="round"
                  stroke="#CCCCCC"
                  strokeWidth="2.048"
                ></g>
                <g id="SVGRepo_iconCarrier">
                  <path
                    d="M104.538 943.944c-4.422 0-8.078-3.578-8.078-7.998 0-4.422 3.5-8 7.906-8h0.172a8.004 8.004 0 0 1 7.998 8 8.004 8.004 0 0 1-7.998 7.998zM136.534 943.944c-4.422 0-8.078-3.578-8.078-7.998 0-4.422 3.5-8 7.906-8h0.172a8.004 8.004 0 0 1 7.998 8 8.004 8.004 0 0 1-7.998 7.998zM168.528 943.944c-4.42 0-8.078-3.578-8.078-7.998 0-4.422 3.5-8 7.906-8h0.172c4.406 0 8 3.578 8 8a8.006 8.006 0 0 1-8 7.998zM200.524 943.944c-4.42 0-8.078-3.578-8.078-7.998 0-4.422 3.5-8 7.906-8h0.172c4.406 0 8 3.578 8 8a8.006 8.006 0 0 1-8 7.998zM232.52 943.944c-4.42 0-8.076-3.578-8.076-7.998 0-4.422 3.5-8 7.904-8h0.172c4.406 0 8 3.578 8 8a8.006 8.006 0 0 1-8 7.998zM264.516 943.944c-4.42 0-8.076-3.578-8.076-7.998 0-4.422 3.5-8 7.904-8h0.172c4.406 0 8 3.578 8 8a8.006 8.006 0 0 1-8 7.998zM296.512 943.944c-4.422 0-8.078-3.578-8.078-7.998 0-4.422 3.5-8 7.906-8h0.172c4.406 0 8 3.578 8 8a8.006 8.006 0 0 1-8 7.998zM328.508 943.944c-4.422 0-8.078-3.578-8.078-7.998 0-4.422 3.5-8 7.906-8h0.172c4.406 0 8 3.578 8 8a8.006 8.006 0 0 1-8 7.998zM360.504 943.944c-4.422 0-8.078-3.578-8.078-7.998 0-4.422 3.5-8 7.906-8h0.172a8.004 8.004 0 0 1 7.998 8 8.004 8.004 0 0 1-7.998 7.998zM584.474 48.06c-4.422 0-8.076-3.578-8.076-8 0-4.42 3.498-7.998 7.904-7.998h0.172a8.004 8.004 0 0 1 7.998 7.998c0 4.422-3.592 8-7.998 8zM648.466 48.06c-4.422 0-8.078-3.578-8.078-8 0-4.42 3.5-7.998 7.906-7.998h0.172a8.004 8.004 0 0 1 7.998 7.998c0 4.422-3.592 8-7.998 8zM616.47 64.058c-4.422 0-8.078-3.578-8.078-8s3.5-8 7.906-8h0.172c4.404 0 7.998 3.578 7.998 8s-3.592 8-7.998 8zM680.43 64.058c-4.42 0-8.076-3.578-8.076-8s3.5-8 7.904-8h0.172c4.406 0 8 3.578 8 8s-3.594 8-8 8zM712.426 48.06c-4.42 0-8.076-3.578-8.076-8 0-4.42 3.5-7.998 7.904-7.998h0.172c4.406 0 8 3.578 8 7.998 0 4.422-3.594 8-8 8zM520.482 224.022c-4.42 0-8.076-3.578-8.076-8s3.5-8 7.904-8h0.172c4.406 0 8 3.578 8 8s-3.594 8-8 8zM520.482 160.044c-4.42 0-8.076-3.578-8.076-7.998 0-4.422 3.5-8 7.904-8h0.172c4.406 0 8 3.578 8 8a8.006 8.006 0 0 1-8 7.998zM504.484 192.042c-4.42 0-8.076-3.578-8.076-8s3.5-8 7.904-8h0.172c4.406 0 8 3.578 8 8s-3.594 8-8 8zM504.484 128.064c-4.42 0-8.076-3.578-8.076-7.998 0-4.422 3.5-8 7.904-8h0.172c4.406 0 8 3.578 8 8a8.004 8.004 0 0 1-8 7.998zM520.482 96.068c-4.42 0-8.076-3.578-8.076-7.998 0-4.422 3.5-8 7.904-8h0.172c4.406 0 8 3.578 8 8a8.004 8.004 0 0 1-8 7.998zM744.422 64.058c-4.422 0-8.076-3.578-8.076-8s3.498-8 7.904-8h0.172c4.406 0 8 3.578 8 8s-3.594 8-8 8zM776.418 48.06c-4.422 0-8.076-3.578-8.076-8 0-4.42 3.498-7.998 7.904-7.998h0.172c4.406 0 8 3.578 8 7.998 0 4.422-3.594 8-8 8zM808.382 64.058c-4.422 0-8.078-3.578-8.078-8s3.5-8 7.906-8h0.172c4.406 0 8 3.578 8 8s-3.592 8-8 8zM840.378 48.06c-4.422 0-8.078-3.578-8.078-8 0-4.42 3.5-7.998 7.906-7.998h0.172c4.406 0 8 3.578 8 7.998 0 4.422-3.592 8-8 8zM872.376 64.058c-4.422 0-8.078-3.578-8.078-8s3.5-8 7.906-8h0.172c4.406 0 7.998 3.578 7.998 8s-3.592 8-7.998 8zM904.372 48.06c-4.422 0-8.078-3.578-8.078-8 0-4.42 3.5-7.998 7.906-7.998h0.172a8.004 8.004 0 0 1 7.998 7.998c0 4.422-3.592 8-7.998 8zM936.336 64.058c-4.422 0-8.078-3.578-8.078-8s3.5-8 7.906-8h0.172c4.404 0 7.998 3.578 7.998 8s-3.594 8-7.998 8zM968.332 48.06c-4.422 0-8.078-3.578-8.078-8 0-4.42 3.5-7.998 7.906-7.998h0.172a8.004 8.004 0 0 1 7.998 7.998c0 4.422-3.594 8-7.998 8zM1000.326 64.058c-4.42 0-8.076-3.578-8.076-8s3.5-8 7.904-8h0.172c4.406 0 8 3.578 8 8s-3.594 8-8 8z"
                    fill=""
                  ></path>
                  <path
                    d="M967.942 1023.934H56.058c-30.872 0-55.992-25.122-55.992-55.992V440.008c0-30.872 25.122-55.994 55.992-55.994 4.422 0 8 3.578 8 8a7.994 7.994 0 0 1-8 7.998c-22.06 0-39.994 17.944-39.994 39.996V967.94c0 22.058 17.934 39.994 39.994 39.994H967.94c22.058 0 39.994-17.936 39.994-39.994V440.008c0-22.052-17.936-39.996-39.994-39.996-4.422 0-8-3.578-8-7.998 0-4.422 3.578-8 8-8 30.872 0 55.992 25.122 55.992 55.994V967.94c0.002 30.872-25.12 55.994-55.99 55.994z"
                    fill=""
                  ></path>
                  <path
                    d="M599.988 464.006h-175.978c-13.232 0-23.998-10.764-23.998-23.998 0-13.232 10.764-23.998 23.998-23.998 4.42 0 8 3.578 8 8s-3.578 8-8 8c-4.406 0-8 3.586-8 8s3.594 8 8 8h175.978c4.406 0 7.998-3.586 7.998-8s-3.592-8-7.998-8c-4.422 0-8-3.578-8-8s3.578-8 8-8c13.232 0 23.996 10.764 23.996 23.998 0 13.234-10.764 23.998-23.996 23.998z"
                    fill=""
                  ></path>
                  <path
                    d="M567.992 432.01h-111.986c-4.42 0-8-3.578-8-8v-175.978a7.994 7.994 0 0 1 8-7.998h111.986c4.422 0 8 3.578 8 7.998v175.978c0 4.422-3.578 8-8 8z m-103.986-15.998h95.986v-159.978h-95.986v159.978z"
                    fill=""
                  ></path>
                  <path
                    d="M456.006 440.008c-4.42 0-8-3.578-8-8v-8c0-4.42 3.578-8 8-8s8 3.578 8 8v8c0 4.424-3.578 8-8 8zM488.002 440.008a7.994 7.994 0 0 1-7.998-8v-8c0-4.42 3.578-8 7.998-8 4.422 0 8 3.578 8 8v8c0 4.424-3.578 8-8 8zM535.996 440.008a7.994 7.994 0 0 1-7.998-8v-8c0-4.42 3.576-8 7.998-8s8 3.578 8 8v8c0 4.424-3.578 8-8 8zM567.992 440.008c-4.422 0-8-3.578-8-8v-8c0-4.42 3.578-8 8-8s8 3.578 8 8v8c0 4.424-3.578 8-8 8zM424.01 400.014H56.058c-4.422 0-8-3.578-8-7.998 0-4.422 3.578-8 8-8h367.952c4.42 0 8 3.578 8 8a7.994 7.994 0 0 1-8 7.998zM967.942 400.014H599.988c-4.422 0-8-3.578-8-7.998 0-4.422 3.578-8 8-8h367.954a7.994 7.994 0 0 1 7.998 8 7.994 7.994 0 0 1-7.998 7.998zM567.992 320.024h-111.986c-4.42 0-8-3.578-8-8s3.578-8 8-8h111.986c4.422 0 8 3.578 8 8s-3.578 8-8 8zM535.996 288.03h-47.994a7.994 7.994 0 0 1-7.998-8 7.994 7.994 0 0 1 7.998-7.998h47.994c4.422 0 8 3.578 8 7.998 0 4.422-3.578 8-8 8zM472.004 224.038c-4.42 0-8-3.578-8-8V88.054c0-4.422 3.578-8 8-8s8 3.578 8 8v127.984c0 4.42-3.578 8-8 8zM551.994 224.038a7.994 7.994 0 0 1-7.998-8V88.054c0-4.422 3.578-8 7.998-8a7.994 7.994 0 0 1 7.998 8v127.984c0 4.42-3.576 8-7.998 8zM1015.934 16.064H583.99a7.994 7.994 0 0 1-7.998-8 7.994 7.994 0 0 1 7.998-7.998h431.944c4.422 0 8 3.578 8 7.998 0 4.422-3.578 8-8 8zM1015.934 96.052H583.99a7.994 7.994 0 0 1-7.998-7.998c0-4.422 3.576-8 7.998-8h431.944c4.422 0 8 3.578 8 8a7.994 7.994 0 0 1-8 7.998z"
                    fill=""
                  ></path>
                  <path
                    d="M551.994 96.052a7.994 7.994 0 0 1-7.998-7.998V8.064a7.994 7.994 0 0 1 7.998-7.998 7.994 7.994 0 0 1 7.998 7.998v79.99a7.992 7.992 0 0 1-7.998 7.998z"
                    fill=""
                  ></path>
                  <path
                    d="M472.004 96.052a8 8 0 0 1-5.656-13.654L546.34 2.41a8 8 0 0 1 11.31 11.312L477.66 93.71a7.974 7.974 0 0 1-5.656 2.342zM360.004 815.96H104.052c-4.422 0-8-3.578-8-8V551.994a7.994 7.994 0 0 1 8-7.998h255.952a7.994 7.994 0 0 1 7.998 7.998V807.96c0 4.422-3.578 8-7.998 8z m-247.954-15.998h239.954V559.992H112.05v239.97zM903.95 591.988h-463.94c-4.42 0-8-3.576-8-7.998s3.578-7.998 8-7.998h463.94c4.422 0 7.998 3.576 7.998 7.998s-3.576 7.998-7.998 7.998zM903.95 655.98h-463.94c-4.42 0-8-3.578-8-7.998 0-4.422 3.578-8 8-8h463.94a7.994 7.994 0 0 1 7.998 8 7.994 7.994 0 0 1-7.998 7.998zM903.95 719.972h-463.94c-4.42 0-8-3.578-8-8a7.994 7.994 0 0 1 8-7.998h463.94a7.994 7.994 0 0 1 7.998 7.998c0 4.422-3.576 8-7.998 8zM695.976 783.964H440.008c-4.42 0-8-3.578-8-8s3.578-7.998 8-7.998h255.968c4.42 0 7.998 3.576 7.998 7.998s-3.578 8-7.998 8zM695.976 943.944H440.008c-4.42 0-8-3.578-8-7.998 0-4.422 3.578-8 8-8h255.968a7.994 7.994 0 0 1 7.998 8 7.994 7.994 0 0 1-7.998 7.998zM360.02 879.952H104.052c-4.422 0-8-3.576-8-7.998s3.578-8 8-8H360.02c4.42 0 7.998 3.578 7.998 8s-3.578 7.998-7.998 7.998zM879.952 975.94c-52.93 0-95.986-43.056-95.986-95.988 0-52.93 43.056-95.986 95.986-95.986 52.932 0 95.988 43.056 95.988 95.986 0 52.93-43.058 95.988-95.988 95.988z m0-175.978c-44.104 0-79.988 35.884-79.988 79.988s35.884 79.99 79.988 79.99 79.99-35.886 79.99-79.99-35.888-79.988-79.99-79.988z"
                    fill=""
                  ></path>
                  <path
                    d="M855.956 943.944a7.996 7.996 0 0 1-5.656-13.654l55.994-55.992a7.996 7.996 0 1 1 11.31 11.31L861.61 941.6a7.972 7.972 0 0 1-5.654 2.344z"
                    fill=""
                  ></path>
                  <path
                    d="M935.946 911.948a7.976 7.976 0 0 1-5.656-2.344l-23.996-23.996a7.996 7.996 0 1 1 11.31-11.31l23.996 23.996a7.996 7.996 0 0 1-5.654 13.654zM823.958 911.948a7.996 7.996 0 0 1-5.654-13.654l15.996-15.998a8 8 0 0 1 11.312 11.31l-15.998 15.998a7.974 7.974 0 0 1-5.656 2.344z"
                    fill=""
                  ></path>
                  <path
                    d="M855.956 911.948a7.976 7.976 0 0 1-5.656-2.344l-15.998-15.998a8 8 0 0 1 11.312-11.31l15.996 15.998a7.996 7.996 0 0 1-5.654 13.654zM855.956 863.954c-13.232 0-23.998-10.764-23.998-23.996s10.766-23.996 23.998-23.996 23.996 10.764 23.996 23.996-10.764 23.996-23.996 23.996z m0-31.996c-4.406 0-7.998 3.594-7.998 8s3.592 8 7.998 8c4.404 0 7.998-3.594 7.998-8s-3.594-8-7.998-8z"
                    fill=""
                  ></path>
                  <path
                    d="M328.024 815.96H136.048c-4.422 0-8-3.578-8-8v-24.386c0-18.452 12.108-24.544 23.466-28.808l7.06-2.532c8.11-2.876 29.058-10.282 34.012-14.232a7.996 7.996 0 0 1 15.452 2.904c0 9.234-11.014 14.688-44.134 26.404l-6.782 2.438c-11.358 4.264-13.076 6.92-13.076 13.826v16.388h175.978v-16.388c0-6.906-1.718-9.562-13.108-13.842l-6.748-2.422c-33.122-11.702-44.134-17.17-44.134-26.404a7.994 7.994 0 0 1 7.998-7.998 7.994 7.994 0 0 1 7.454 5.094c4.936 3.952 25.902 11.358 34.01 14.232l7.03 2.516c11.374 4.28 23.498 10.374 23.498 28.824v24.386a7.996 7.996 0 0 1-8 8z"
                    fill=""
                  ></path>
                  <path
                    d="M232.02 751.968c-27.34 0-63.976-37.918-63.976-76.678 0-38.37 27.498-67.304 63.976-67.304 36.496 0 64.008 28.936 64.008 67.304 0 38.76-36.652 76.678-64.008 76.678z m0-127.984c-27.792 0-47.978 21.576-47.978 51.306 0 32.59 32.184 60.68 47.978 60.68 15.81 0 48.01-28.09 48.01-60.68 0-29.73-20.186-51.306-48.01-51.306z"
                    fill=""
                  ></path>
                  <path
                    d="M200.04 748.906c-4.42 0-8-3.578-8-8v-12.138c0-4.42 3.578-7.998 8-7.998s8 3.578 8 7.998v12.138c0 4.422-3.58 8-8 8zM264.032 748.906a7.994 7.994 0 0 1-7.998-8v-13.684c0-4.422 3.578-8 7.998-8 4.422 0 8 3.578 8 8v13.684c0 4.422-3.578 8-8 8z"
                    fill=""
                  ></path>
                </g>
              </svg>
            </span>
            {!collapsed && <span className="text-lg">Sellos</span>}
          </NavLink>
          <NavLink
            to="/settings"
            className={({ isActive }) =>
              (isActive ? `${linkBase} bg-[var(--menu-hover)]` : linkBase) +
              (collapsed ? ' justify-center' : '')
            }
            onMouseEnter={() => prefetchPage('settings')}
            onClick={() => {
              if (isModal) onClose()
            }}
          >
            <span className="w-10">
              <svg
                width="100%"
                height="100%"
                viewBox="-1.8 -1.8 33.60 33.60"
                version="1.1"
                xmlns="http://www.w3.org/2000/svg"
                fill="#000000"
                stroke="#000000"
              >
                <g id="SVGRepo_bgCarrier" strokeWidth="0" />

                <g id="SVGRepo_tracerCarrier" strokeLinecap="round" strokeLinejoin="round" />

                <g id="SVGRepo_iconCarrier">
                  <title>settings</title>
                  <desc>Created with Sketch Beta.</desc>
                  <defs> </defs>
                  <g id="Page-1" strokeWidth="2.4" fill="none" fillRule="evenodd">
                    <g
                      id="Icon-Set-Filled"
                      transform="translate(-103.000000, -362.000000)"
                      fill="#2CA9BC"
                    >
                      <path
                        d="M118,382 C115.261,382 113.042,379.762 113.042,377 C113.042,374.238 115.261,372 118,372 C120.739,372 122.959,374.238 122.959,377 C122.959,379.762 120.739,382 118,382 L118,382 Z M132.008,380.536 L129.685,379.184 C129.815,378.474 129.901,377.749 129.901,377 C129.901,376.252 129.815,375.526 129.685,374.816 L132.008,373.464 C132.957,372.912 133.281,371.688 132.733,370.732 L130.75,367.268 C130.203,366.312 128.989,365.983 128.041,366.536 L125.694,367.901 C124.598,366.961 123.352,366.192 121.967,365.697 L121.967,364 C121.967,362.896 121.079,362 119.983,362 L116.017,362 C114.921,362 114.033,362.896 114.033,364 L114.033,365.697 C112.648,366.192 111.402,366.961 110.306,367.901 L107.959,366.536 C107.011,365.983 105.797,366.312 105.25,367.268 L103.267,370.732 C102.719,371.688 103.044,372.912 103.992,373.464 L106.315,374.816 C106.185,375.526 106.099,376.252 106.099,377 C106.099,377.749 106.185,378.474 106.315,379.184 L103.992,380.536 C103.044,381.088 102.719,382.312 103.267,383.268 L105.25,386.732 C105.797,387.688 107.011,388.017 107.959,387.464 L110.306,386.099 C111.402,387.039 112.648,387.809 114.033,388.303 L114.033,390 C114.033,391.104 114.921,392 116.017,392 L119.983,392 C121.079,392 121.967,391.104 121.967,390 L121.967,388.303 C123.352,387.809 124.598,387.039 125.694,386.099 L128.041,387.464 C128.989,388.017 130.203,387.688 130.75,386.732 L132.733,383.268 C133.281,382.312 132.957,381.088 132.008,380.536 L132.008,380.536 Z M118,374 C116.357,374 115.025,375.344 115.025,377 C115.025,378.657 116.357,380 118,380 C119.643,380 120.975,378.657 120.975,377 C120.975,375.344 119.643,374 118,374 L118,374 Z"
                        id="settings"
                      >
                        {' '}
                      </path>
                    </g>
                  </g>
                </g>
              </svg>
            </span>
            {!collapsed && <span className="text-lg">Ajustes</span>}
          </NavLink>
          <NavLink
            to="/sugerencias"
            className={({ isActive }) =>
              (isActive ? `${linkBase} bg-[var(--menu-hover)]` : linkBase) +
              (collapsed ? ' justify-center' : '')
            }
            onMouseEnter={() => prefetchPage('suggestions')}
            onClick={() => {
              if (isModal) onClose()
            }}
          >
            <span className="w-10">
              <svg
                width="100%"
                height="100%"
                viewBox="0 0 1024.00 1024.00"
                className="icon"
                version="1.1"
                xmlns="http://www.w3.org/2000/svg"
                fill="#000000"
                stroke="#000000"
                strokeWidth="14.336000000000002"
              >
                <g id="SVGRepo_bgCarrier" strokeWidth="0" />

                <g
                  id="SVGRepo_tracerCarrier"
                  strokeLinecap="round"
                  strokeLinejoin="round"
                  stroke="#2CA9BC"
                  strokeWidth="86.01599999999999"
                >
                  <path
                    d="M885.746 741.427H514.972l-105.37 105.395c-0.788 0.764-1.77 1.09-2.623 1.726-0.787 0.59-1.333 1.42-2.228 1.922-0.416 0.218-0.875 0.218-1.29 0.416-1.53 0.742-3.08 1.158-4.718 1.55-1.224 0.284-2.404 0.614-3.627 0.7-1.551 0.11-3.037-0.086-4.566-0.306-1.376-0.195-2.709-0.35-4.042-0.786-1.2-0.416-2.292-1.028-3.43-1.64-1.551-0.808-2.971-1.683-4.304-2.862-0.35-0.306-0.787-0.414-1.114-0.72-0.547-0.548-0.745-1.268-1.224-1.836-0.72-0.875-1.66-1.508-2.25-2.492L314.28 741.427H169.847c-49.419 0-89.487-40.07-89.487-89.485V226.875c0-49.42 40.07-89.487 89.487-89.487h715.9c49.42 0 89.486 40.069 89.486 89.487v425.067c0.001 49.417-40.067 89.485-89.487 89.485zM307.07 729.26c-1.222-2.054-1.77-4.284-2.25-6.511 0.612 3.451 1.9 6.555 3.89 9.284l-1.64-2.773z m4.895-26.938c-0.59 0.524-1.202 0.938-1.726 1.506 0.502-0.546 1.158-1.006 1.726-1.506z m-7.669 17.87c-0.087-1.18 0.153-2.338 0.264-3.518-0.088 0.832-0.482 1.53-0.482 2.382 0 0.393 0.197 0.742 0.218 1.136z m2.316-10.988c-0.307 0.61-0.656 1.158-0.917 1.812 0.24-0.635 0.61-1.203 0.917-1.812z m623.878-482.33c0-24.71-20.033-44.743-44.744-44.743H169.847c-24.71 0-44.744 20.034-44.744 44.743V651.94c0 24.71 20.035 44.743 44.744 44.743h156.602c-0.326 0-0.612 0.174-0.938 0.195 8.04-0.327 16.015 3.344 20.318 10.597l51.821 87.435 91.74-91.76c4.609-4.587 10.66-6.663 16.69-6.464h379.667c24.711 0 44.744-20.034 44.744-44.743V226.874zM317.01 698.934c0.896-0.416 1.813-0.612 2.73-0.896-0.916 0.285-1.856 0.48-2.73 0.896z m412.133-225.97c-24.71 0-44.744-20.032-44.744-44.743 0-24.71 20.032-44.744 44.744-44.744 24.71 0 44.743 20.034 44.743 44.744s-20.034 44.744-44.743 44.744z m-201.347 0c-24.71 0-44.744-20.032-44.744-44.743 0-24.71 20.035-44.744 44.744-44.744s44.744 20.034 44.744 44.744-20.036 44.744-44.744 44.744z m-201.347 0c-24.71 0-44.744-20.032-44.744-44.743 0-24.71 20.035-44.744 44.744-44.744s44.743 20.034 44.743 44.744-20.033 44.744-44.743 44.744z"
                    fill="#000000"
                  />
                </g>

                <g id="SVGRepo_iconCarrier">
                  <path
                    d="M885.746 741.427H514.972l-105.37 105.395c-0.788 0.764-1.77 1.09-2.623 1.726-0.787 0.59-1.333 1.42-2.228 1.922-0.416 0.218-0.875 0.218-1.29 0.416-1.53 0.742-3.08 1.158-4.718 1.55-1.224 0.284-2.404 0.614-3.627 0.7-1.551 0.11-3.037-0.086-4.566-0.306-1.376-0.195-2.709-0.35-4.042-0.786-1.2-0.416-2.292-1.028-3.43-1.64-1.551-0.808-2.971-1.683-4.304-2.862-0.35-0.306-0.787-0.414-1.114-0.72-0.547-0.548-0.745-1.268-1.224-1.836-0.72-0.875-1.66-1.508-2.25-2.492L314.28 741.427H169.847c-49.419 0-89.487-40.07-89.487-89.485V226.875c0-49.42 40.07-89.487 89.487-89.487h715.9c49.42 0 89.486 40.069 89.486 89.487v425.067c0.001 49.417-40.067 89.485-89.487 89.485zM307.07 729.26c-1.222-2.054-1.77-4.284-2.25-6.511 0.612 3.451 1.9 6.555 3.89 9.284l-1.64-2.773z m4.895-26.938c-0.59 0.524-1.202 0.938-1.726 1.506 0.502-0.546 1.158-1.006 1.726-1.506z m-7.669 17.87c-0.087-1.18 0.153-2.338 0.264-3.518-0.088 0.832-0.482 1.53-0.482 2.382 0 0.393 0.197 0.742 0.218 1.136z m2.316-10.988c-0.307 0.61-0.656 1.158-0.917 1.812 0.24-0.635 0.61-1.203 0.917-1.812z m623.878-482.33c0-24.71-20.033-44.743-44.744-44.743H169.847c-24.71 0-44.744 20.034-44.744 44.743V651.94c0 24.71 20.035 44.743 44.744 44.743h156.602c-0.326 0-0.612 0.174-0.938 0.195 8.04-0.327 16.015 3.344 20.318 10.597l51.821 87.435 91.74-91.76c4.609-4.587 10.66-6.663 16.69-6.464h379.667c24.711 0 44.744-20.034 44.744-44.743V226.874zM317.01 698.934c0.896-0.416 1.813-0.612 2.73-0.896-0.916 0.285-1.856 0.48-2.73 0.896z m412.133-225.97c-24.71 0-44.744-20.032-44.744-44.743 0-24.71 20.032-44.744 44.744-44.744 24.71 0 44.743 20.034 44.743 44.744s-20.034 44.744-44.743 44.744z m-201.347 0c-24.71 0-44.744-20.032-44.744-44.743 0-24.71 20.035-44.744 44.744-44.744s44.744 20.034 44.744 44.744-20.036 44.744-44.744 44.744z m-201.347 0c-24.71 0-44.744-20.032-44.744-44.743 0-24.71 20.035-44.744 44.744-44.744s44.743 20.034 44.743 44.744-20.033 44.744-44.743 44.744z"
                    fill="#000000"
                  />
                </g>
              </svg>
            </span>
            {!collapsed && <span className="text-lg">Sugerencias</span>}
          </NavLink>
        </nav>
      </aside>
    </>
  )
}
